<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>School Shop ‚Äî Student Seller</title>
<style>
  :root{--bg:#0f1115;--card:#161a22;--muted:#8b95a7;--text:#e8ecf3;--ring:0 0 0 3px #67b7ff33;}
  *{box-sizing:border-box;}
  html,body{margin:0;background:linear-gradient(180deg,#0c0f14,#0f1115 25%,#0f1115);color:var(--text);font-family:system-ui, sans-serif;}
  .wrap{max-width:1000px;margin:auto;padding:16px;}
  header{position:sticky;top:0;background:#0f1115cc;backdrop-filter:saturate(140%) blur(8px);border-bottom:1px solid #202737;z-index:10;}
  .brand{display:flex;gap:10px;align-items:center;font-weight:800;letter-spacing:.3px;}
  .brand .logo{width:34px;height:34px;border-radius:9px;background:conic-gradient(from 210deg at 50% 50%, #67b7ff, #6be675, #ffcf5c, #67b7ff);box-shadow:0 6px 20px #67b7ff33;}
  .hero{display:grid;gap:14px;padding:28px 16px 8px;}
  .hero h1{margin:0;font-size:clamp(22px,4vw,34px);}
  .hero p{margin:0;color:var(--muted);}
  .pill{padding:2px 8px;border-radius:999px;background:#172033;border:1px solid #2b3450;color:#cde1ff;font-size:12px;}
  .grid{display:grid;gap:14px;grid-template-columns:repeat(12,1fr);}
  @media(max-width:760px){.grid{grid-template-columns:repeat(6,1fr);}}
  .card{grid-column:span 6;background:var(--card);border:1px solid #202737;border-radius:14px;overflow:hidden;display:flex;flex-direction:column;transition:transform .12s ease,box-shadow .12s ease;}
  .card:hover{transform:translateY(-2px);box-shadow:0 8px 28px #00000066;}
  .media{aspect-ratio:16/10;background:#121621;display:grid;place-items:center;font-size:52px;overflow:hidden;}
  .content{padding:14px;display:grid;gap:10px;}
  .row{display:flex;align-items:center;justify-content:space-between;gap:10px;}
  .price{font-weight:800;}
  .badge{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid #2a3142;color:#ccd6e8;background:#121621;}
  .desc{color:var(--muted);font-size:14px;}
  .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 12px;border-radius:10px;border:1px solid #2a3142;background:#141a26;color:var(--text);cursor:pointer;}
  .btn:focus-visible{outline:none;box-shadow:var(--ring);}
  .btn.buy{background:linear-gradient(180deg,#1c7426,#0d5817);border-color:#1b7d2b;}
  .btn.alt{background:#141926;}
  footer{padding:28px 16px;color:var(--muted);border-top:1px solid #202737;margin-top:22px;text-align:center;}
  form{display:grid;gap:10px;background:var(--card);border:1px solid #202737;border-radius:14px;padding:16px;margin-top:20px;}
  input,select,textarea{width:100%;padding:12px;border-radius:10px;border:1px solid #2a3142;background:#111622;color:var(--text);}
  input:focus,select:focus,textarea:focus{outline:none;box-shadow:var(--ring);border-color:#3a4762;}
  .two{display:grid;gap:10px;grid-template-columns:1fr 1fr;}
  @media(max-width:640px){.two{grid-template-columns:1fr;}}
  input[type="file"]{display:none;}
</style>
</head>
<body>
<header>
  <div class="wrap topbar">
    <div class="brand"><div class="logo"></div><span>School Shop</span></div>
  </div>
</header>

<main class="wrap">
  <section class="hero">
    <h1>Stuff I Sell at School</h1>
    <p>Keyboard fidgets, infinity cubes, name keychains, and Frontman masks. Quick pick-ups during passing periods and lunch!</p>
    <span class="pill">Use the form below to reserve an item.</span>
  </section>

  <section class="grid" id="products">
    <!-- Product Cards -->
    <article class="card" data-id="1">
      <div class="media" id="img1">‚å®Ô∏è</div>
      <div class="content">
        <div class="row"><h3>Keyboard Fidgets</h3><span class="badge">Popular</span></div>
        <div class="row"><div class="price">$4.00</div><div class="stock">In stock</div></div>
        <p class="desc">Clicky and satisfying! Great for focus.</p>
        <div class="row">
          <button class="btn buy" type="button" data-name="Keyboard Fidgets">Reserve</button>
          <button class="btn alt" type="button" onclick="addPhoto('1')">Add Photo</button>
          <input type="file" id="file1" accept="image/*" onchange="loadPhoto(event,'1')"/>
        </div>
      </div>
    </article>

    <article class="card" data-id="2">
      <div class="media" id="img2">üßä</div>
      <div class="content">
        <div class="row"><h3>Infinity Cube</h3><span class="badge">New</span></div>
        <div class="row"><div class="price">$6.00</div><div class="stock">Low stock</div></div>
        <p class="desc">Flip forever. Smooth hinges and pocket size.</p>
        <div class="row">
          <button class="btn buy" type="button" data-name="Infinity Cube">Reserve</button>
          <button class="btn alt" type="button" onclick="addPhoto('2')">Add Photo</button>
          <input type="file" id="file2" accept="image/*" onchange="loadPhoto(event,'2')"/>
        </div>
      </div>
    </article>

    <article class="card" data-id="3">
      <div class="media" id="img3">üîë</div>
      <div class="content">
        <div class="row"><h3>Name Keychain (Custom)</h3><span class="badge">Custom</span></div>
        <div class="row"><div class="price">$5.00</div><div class="stock">Made to order</div></div>
        <p class="desc">Pick your name and color. Ready next day.</p>
        <div class="row">
          <button class="btn buy" type="button" data-name="Name Keychain (Custom)">Reserve</button>
          <button class="btn alt" type="button" onclick="addPhoto('3')">Add Photo</button>
          <input type="file" id="file3" accept="image/*" onchange="loadPhoto(event,'3')"/>
        </div>
      </div>
    </article>

    <article class="card" data-id="4">
      <div class="media" id="img4">üé≠</div>
      <div class="content">
        <div class="row"><h3>Frontman Mask</h3><span class="badge">Hot</span></div>
        <div class="row"><div class="price">$8.00</div><div class="stock">In stock</div></div>
        <p class="desc">Angular and shiny. Perfect for costumes.</p>
        <div class="row">
          <button class="btn buy" type="button" data-name="Frontman Mask">Reserve</button>
          <button class="btn alt" type="button" onclick="addPhoto('4')">Add Photo</button>
          <input type="file" id="file4" accept="image/*" onchange="loadPhoto(event,'4')"/>
        </div>
      </div>
    </article>
  </section>

  <section id="order">
    <h2>Reserve / Order</h2>
    <form id="orderForm" action="https://formspree.io/f/mandqzzn" method="POST">
      <div class="two">
        <div><label>Your Name:<input type="text" name="buyer" required></label></div>
        <div><label>Contact:<input type="text" name="contact" required></label></div>
      </div>
      <div class="two">
        <div>
          <label>Item:
            <select name="item" id="item" required>
              <option>Keyboard Fidgets</option>
              <option>Infinity Cube</option>
              <option>Name Keychain (Custom)</option>
              <option>Frontman Mask</option>
            </select>
          </label>
        </div>
        <div><label>Qty:<input type="number" name="qty" min="1" value="1" required></label></div>
      </div>
      <label>Notes:<textarea name="details" rows="3"></textarea></label>
      <button class="btn buy" type="submit">Send Order</button>
    </form>
  </section>

  <footer>
    <p>¬© <span id="year"></span> Student Seller</p>
  </footer>
</main>

<script>
  document.getElementById("year").textContent = new Date().getFullYear();

  // Load photos from localStorage
  window.addEventListener('load', () => {
    for (let i = 1; i <= 4; i++) {
      const data = localStorage.getItem('productImg' + i);
      if (data) {
        document.getElementById('img' + i).innerHTML =
          `<img src="${data}" style="width:100%;height:100%;object-fit:cover">`;
      }
    }
  });

  // Reserve button behavior
  document.querySelectorAll('.btn.buy[type="button"]').forEach(btn => {
    btn.addEventListener('click', () => {
      document.getElementById('item').value = btn.dataset.name;
      window.scrollTo({ top: document.getElementById('order').offsetTop - 20, behavior: 'smooth' });
    });
  });

  // Formspree submission handling
  document.getElementById('orderForm').addEventListener('submit', async function (e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);

    const response = await fetch(form.action, {
      method: form.method,
      body: data,
      headers: { 'Accept': 'application/json' }
    });

    if (response.ok) {
      alert('Order sent successfully!');
      form.reset();
    } else {
      alert('Oops! Something went wrong.');
    }
  });

  // Add Photo logic
  function addPhoto(id) {
    document.getElementById('file' + id).click();
  }

  function loadPhoto(event, id) {
    const file = event.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = e => {
        document.getElementById('img' + id).innerHTML =
          `<img src="${e.target.result}" style="width:100%;height:100%;object-fit:cover">`;
        localStorage.setItem('productImg' + id, e.target.result);
      };
      reader.readAsDataURL(file);
    }
  }
</script>
</body>
</html>
